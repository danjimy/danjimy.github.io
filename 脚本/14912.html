<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>数据库 脚本表 type 类型解析 | 单机魔域综合网</title><meta name="author" content="不在年少"><meta name="copyright" content="不在年少"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ACTION_SYS_FIRST &#x3D; 100,ACTION_MENUTEXT &#x3D; 101, &#x2F;&#x2F; 菜单文本。data:显示行数(缺省为0), param&#x3D;”text”(可选): 显示文本，此类型可包含空格，也可为空行。ACTION_MENULINK &#x3D; 102, &#x2F;&#x2F; 菜单超链接。”text task_id align">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库 脚本表 type 类型解析">
<meta property="og:url" content="https://danjimy.github.io/%E8%84%9A%E6%9C%AC/14912.html">
<meta property="og:site_name" content="单机魔域综合网">
<meta property="og:description" content="ACTION_SYS_FIRST &#x3D; 100,ACTION_MENUTEXT &#x3D; 101, &#x2F;&#x2F; 菜单文本。data:显示行数(缺省为0), param&#x3D;”text”(可选): 显示文本，此类型可包含空格，也可为空行。ACTION_MENULINK &#x3D; 102, &#x2F;&#x2F; 菜单超链接。”text task_id align">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-09-19T05:18:03.958Z">
<meta property="article:modified_time" content="2024-07-13T11:44:20.233Z">
<meta property="article:author" content="不在年少">
<meta property="article:tag" content="文章标签">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://danjimy.github.io/%E8%84%9A%E6%9C%AC/14912.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库 脚本表 type 类型解析',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-07-13 19:44:20'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/kapian.css"><script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%95%99%E7%A8%8B/"><span> 教程</span></a></li><li><a class="site-page child" href="/categories/%E8%84%9A%E6%9C%AC/"><span> 脚本</span></a></li><li><a class="site-page child" href="/categories/%E8%A1%A5%E4%B8%81/"><span> 补丁</span></a></li><li><a class="site-page child" href="/categories/%E5%B7%A5%E5%85%B7/"><span> 工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="单机魔域综合网"><span class="site-name">单机魔域综合网</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E6%95%99%E7%A8%8B/"><span> 教程</span></a></li><li><a class="site-page child" href="/categories/%E8%84%9A%E6%9C%AC/"><span> 脚本</span></a></li><li><a class="site-page child" href="/categories/%E8%A1%A5%E4%B8%81/"><span> 补丁</span></a></li><li><a class="site-page child" href="/categories/%E5%B7%A5%E5%85%B7/"><span> 工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">数据库 脚本表 type 类型解析</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-09-19T05:18:03.958Z" title="发表于 2024-09-19 13:18:03">2024-09-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-13T11:44:20.233Z" title="更新于 2024-07-13 19:44:20">2024-07-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%84%9A%E6%9C%AC/">脚本</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库 脚本表 type 类型解析"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p>ACTION_SYS_FIRST &#x3D; 100,<br>ACTION_MENUTEXT &#x3D; 101, &#x2F;&#x2F; 菜单文本。data:显示行数(缺省为0), param&#x3D;”text”(可选): 显示文本，此类型可包含空格，也可为空行。<br>ACTION_MENULINK &#x3D; 102, &#x2F;&#x2F; 菜单超链接。”text task_id align”: align(可选): 对齐模式(缺省&#x2F;0:左对齐; 5:居中; 9:右对齐; a(1-9)b(2-8):不换行,从a&#x2F;b行宽处开始显示,9为右对齐)<br>ACTION_MENUEDIT &#x3D; 103, &#x2F;&#x2F; 菜单输入框。”len task_id text”: len:可输入的长度；text(可选)：显示的文字，align：对齐模式(缺省：文字在左，正整数：输入框嵌入在文字的第几字符处)。★说明：如有多个输入框，由界面用圆按钮区分，每次只上传一个。<br>ACTION_MENUPIC &#x3D; 104, &#x2F;&#x2F; 菜单图片。”x y pic_id task_id”：task_id(可选)：表示图片可以“按”。图片所在区域不显示文本。<br>ACTION_MENUPASSEDIT &#x3D; 105, &#x2F;&#x2F;&#x2F;&#x2F;密码输入框<br>ACTION_MENUNUMBEREDIT &#x3D; 106, &#x2F;&#x2F;&#x2F;&#x2F;数字输入框<br>ACTION_MENUBUTTON &#x3D; 110, &#x2F;&#x2F; 菜单按钮，格式同超链接。<br>ACTION_MENULISTPART &#x3D; 111, &#x2F;&#x2F; 菜单列表项。”task_id iter text…”, 玩家点选列表后，会触发task_id，并且iter会填到玩家的%iter变量中。<br>ACTION_MENUCREATE &#x3D; 120, &#x2F;&#x2F; 菜单创建。”cancel_task_id”(可选): 强行关闭菜单时触发的TASK<br>ACTION_RAND &#x3D; 121, &#x2F;&#x2F; 检测随机率。”data1 data2”。”10 100”表示有1&#x2F;10的机会是true。<br>ACTION_RAND<br>ACTION &#x3D; 122, &#x2F;&#x2F; 随机Action “action0 action1… action7”共8个，随机挑一个执行<br>ACTION_CHKTIME &#x3D; 123, &#x2F;&#x2F; data为时间类型 0-检查当前服务器详细时间 “%d-%d-%d %d:%d %d-%d-%d %d:%d”; 1-检查年某天时间”%d-%d %d:%d %d-%d %d:%d”, 2-检查月某天时间”%d %d:%d %d %d:%d”, 3-检查周某天时间”%d %d:%d %d %d:%d”, 4-检查日时间”%d:%d %d:%d”, 5-检查小时时间”%d %d”(每个小时的第几分到底几分)<br>ACTION_POSTCMD &#x3D; 124, &#x2F;&#x2F; 向客户端发送界面命令，data为命令编号<br>ACTION_BROCASTMSG &#x3D; 125, &#x2F;&#x2F; 全服务器广播文字消息，data为频道，para为内容<br>ACTION_MESSAGEBOX &#x3D; 126, &#x2F;&#x2F; 让客户端弹出对话框。data为对话框类型(0-99)，param&#x3D;文字串参数。<br>ACTION_130 &#x3D; 130, &#x2F;&#x2F;更新公告窗口脚本<br>ACTION_131 &#x3D; 131, &#x2F;&#x2F;更新公告结束脚本。<br>ACTION_ZSBZBOX &#x3D; 188, &#x2F;&#x2F; 众神宝藏。data为全部分领取金额，为0时表示禁止全部领取。param&#x3D;物品类型ID 显示数量 执行脚本 随机因子| 一共需要8个物品。否则无效。每个物品之间以|号隔开。<br>ACTION_DIALOG &#x3D; 189, &#x2F;&#x2F; 所有的Dialog类型都可以用这个来实现。。但建议只用于实现一些简单的无操作类的窗口。data为窗口类型。。param&#x3D;文字串参数。<br>ACTION_PKDIALOG &#x3D; 190, &#x2F;&#x2F; PK赛开始的对话框。178自定义。<br>ACTION_PUBLIC_DATAVAR &#x3D; 191, &#x2F;&#x2F; 全局整型变量。<br>ACTION_PUBLIC_DATASTRVAR &#x3D; 192, &#x2F;&#x2F; 全局文本变量。<br>ACTION_SYS_LIMIT &#x3D; 199, &#x2F;&#x2F; npc part, need npc ptr ————————————————————————–<br>ACTION_NPC_FIRST &#x3D; 200,<br>ACTION_NPC_ATTR &#x3D; 201, &#x2F;&#x2F; 修改或检测任务NPC的属性。”attr opt data npc_id”，至少3个参数。如果指定npc_id，该NPC必须在本地图组中。attr可选择”ownerid”(&#x3D;,&#x3D;&#x3D;)、”ownertype”(&#x3D;,&#x3D;&#x3D;)、”lookface”(&#x3D;,&#x3D;&#x3D;)、”data?”(&#x3D;,+&#x3D;,&#x3D;&#x3D;,&lt;,&lt;&#x3D;,&gt;,&gt;&#x3D;,pass. pass可让字段中存的DateStamp增减一定的天数，. data可为”accept”)、”datastr”(&#x3D;,&#x3D;&#x3D;)、”life”(&#x3D;)、”maxlife”(&#x3D;) &#x2F;&#x2F;<br>ACTION_NPC_REQUESTSHIFT &#x3D; 202, &#x2F;&#x2F; 通知客户端平移一个NPC。param&#x3D;”idNextTask”。 &#x2F;&#x2F;<br>ACTION_NPC_SHIFT &#x3D; 203, &#x2F;&#x2F; 平移当前NPC。限同地图移动。限动态NPC。<br>ACTION_NPC_ERASE &#x3D; 205, &#x2F;&#x2F; 删除当前NPC。限动态NPC。注意：删除后，不要再对此NPC进行操作。dwData不为0，表示删除本地图的所有type为dwData的NPC。param&#x3D;”idMap type”: 删除指定地图的某些NPC。<br>ACTION_NPC_MODIFY &#x3D; 206, &#x2F;&#x2F; 跨线程修改指定任务NPC的属性。”npc_id attr opt data”。attr可选择”lookface”(&#x3D;)、”data?”(&#x3D;)、”datastr”(&#x3D;)<br>ACTION_NPC_RESETSYNOWNER &#x3D; 207, &#x2F;&#x2F; 重置帮派地图的主人。仅用于帮派标志NPC。统计帮派战绩第一名填入OWNER_ID，同时清除所有战绩。所有攻击自动停止。(未中止地图的战斗标志)<br>ACTION_NPC_FIND_NEXT_TABLE &#x3D; 208, &#x2F;&#x2F; 查找下一个列表项，将ID写入TASK_ITERATOR。仅用于带列表的NPC。param&#x3D;”type”, 对应cq_table的type字段。<br>ACTION_NPC_ADD_TABLE &#x3D; 209, &#x2F;&#x2F; 在列表中添加一条, type和idKey相同的会被预先删除(idKey为0时，不删除)。仅用于带列表的NPC。param&#x3D;”type idKey data0 data1 data2 data3 szData”, 至少2个参数。<br>ACTION_NPC_DEL_TABLE &#x3D; 210, &#x2F;&#x2F; 从列表中删除所有符合条件的项，不存在的也返回true。仅用于带列表的NPC。param&#x3D;”type idKey data0 data1 data2 data3 szData”, 至少2个参数, 参数为0表示不匹配，所有不为0的与列表完全相同的会删除。无param时，删除当前记录(iterator指定的记录)，总是返回true。<br>ACTION_NPC_DEL_INVALID &#x3D; 211, &#x2F;&#x2F; 从列表中删除所有过期的项，不存在的也返回true。仅用于带列表的NPC。param&#x3D;”type idx”, idx表示日期(%date_stamp)存放在哪个data中。[例如idx为3表示日期存放在data3中，所有data3中的日期小于今天日期的项将被删除。]<br>ACTION_NPC_TABLE_AMOUNT &#x3D; 212, &#x2F;&#x2F; 检查列表的项数，&gt;&#x3D;data时返回false，&lt;data时返回true。param无意义。<br>ACTION_NPC_SYS_AUCTION &#x3D; 213, &#x2F;&#x2F; LW让NPC开始系统拍买,DATA为NPC的ID,param 为系统正式开始的提示<br>ACTION_NPC_DRESS_SYNCLOTHING &#x3D; 214, &#x2F;&#x2F;穿帮派服装<br>ACTION_NPC_TAKEOFF_SYNCLOTHING &#x3D; 215, &#x2F;&#x2F;脱帮派服装<br>ACTION_NPC_AUCTIONING &#x3D; 216, &#x2F;&#x2F;判断是否还有物品正在拍卖中DATA为NPC的ID，PARAM：type：0.表示查看系统拍卖物品，1.表示查看玩家物品<br>ACTION_NPC_UNKONW223 &#x3D; 223, &#x2F;&#x2F;不知道是个什么，但跟军团有关系。看到一直都是返回true。<br>ACTION_NPC_ISLEGIONWARTIME &#x3D; 226, &#x2F;&#x2F;判断是否在军团战中。<br>ACTION_NPC_CLEARPASSWORD &#x3D; 229, &#x2F;&#x2F;清除普通仓库的密码。<br>ACTION_NPC_DIALOG &#x3D; 250, &#x2F;&#x2F;让客户端弹出对话框。data对话框编号，该类型只能用于NPC上，不可用于任务道具上。<br>ACTION_NPC_LIMIT &#x3D; 299, &#x2F;&#x2F; map part, need curr map ————————————————————————–<br>ACTION_MAP_FIRST &#x3D; 300,<br>ACTION_MAP_MOVENPC &#x3D; 301, &#x2F;&#x2F; 把npc移动到指定的地图、位置(仅用于固定NPC)，data 为指定的npc的ID, param为 “idMap nPosX nPosY”。注意：可移动到该地图的(0,0)坐标，以便隐藏NPC。<br>ACTION_MAP_MAPUSER &#x3D; 302, &#x2F;&#x2F; 判断指定地图中的用户人数, data 为指定地图ID, param为 “cmd opt data”, &#x2F;&#x2F; cmd支持”map_user”和”alive_user”, opt可以为”&#x3D;&#x3D;, &lt;&#x3D;, &gt;&#x3D;”，data为数量<br>ACTION_MAP_BROCASTMSG &#x3D; 303, &#x2F;&#x2F; 广播消息, data 为地图id, szParam为广播的消息<br>ACTION_MAP_DROPITEM &#x3D; 304, &#x2F;&#x2F; 地图产生指定物品, szParam为”idItemType idMap nPosX nPosY alivesecs(存活时间) priv_secs(保护时间) “单位：秒。<br>ACTION_MAP_SETSTATUS &#x3D; 305, &#x2F;&#x2F; 设置地图状态，支持EVENT。param&#x3D;”mapid status_bit data”, status_bit &#x3D; { STATUS_WAR&#x3D;1, }, data&#x3D;0或1。<br>ACTION_MAP_ATTRIB &#x3D; 306, &#x2F;&#x2F; 检查、修改地图的属性。param&#x3D;”field opt data idMap”, 参数至少3个，缺省为当前地图。field&#x3D;”synid”(opt&#x3D;”&#x3D;&#x3D;”、”&#x3D;”)。field&#x3D;”status”(opt&#x3D;”test”、”set”、”reset”)。field&#x3D;”type”(opt&#x3D;”test”)。field&#x3D;”res_lev”(opt&#x3D;”&#x3D;”、”&#x3D;&#x3D;”、”&lt;”)。field&#x3D;”mapdoc”(opt&#x3D;”&#x3D;”、”&#x3D;&#x3D;”)， portal0_x(&#x3D;), portal0_y(&#x3D;),field &#x3D;”castle”(opt&#x3D;”&#x3D;&#x3D;”)<br>ACTION_MAP_REGION_MONSTER &#x3D; 307, &#x2F;&#x2F; 检查指定地图或当前地图的某区域内怪物数量。param&#x3D;”map_id region_x region_y region_cx region_cy monster_type opt data”。map_id为0时表示取当前地图，monster_type为0表示不检查类型，opt支持“&#x3D;&#x3D;”和“&lt;”。<br>ACTION_MAP_CHANGEWEATHER &#x3D; 310, &#x2F;&#x2F; 修改玩家所在REGION的天气。param&#x3D;”Type Intensity Dir Color KeepSecs”, Type, Intensity&#x3D;0<del>999, Dir&#x3D;0</del>359, Color&#x3D;0x00RRGGBB, KeepSecs&#x3D;seconds<br>ACTION_MAP_CHANGELIGHT &#x3D; 311, &#x2F;&#x2F; 修改玩家地图的亮度。param&#x3D;”idmap light secs”, light&#x3D;0xAARRGGBB(0xFFFFFFFF表示恢复), secs为0 : 表示永久改变<br>ACTION_MAP_MAPEFFECT &#x3D; 312, &#x2F;&#x2F; 在指定地图的指定地点显示地图特效, param &#x3D; “idMap x y EffectName”<br>ACTION_MAP_CREATEMAP &#x3D; 313, &#x2F;&#x2F; 创建一张地图，链接到当前NPC上(npc必须为LINK_NPC)，需要玩家对象。param&#x3D;”name owner_type owner_id mapdoc type portal_x portal_y reborn_map reborn_portal res_lev”。partal指入口点坐标，res_lev表示地图等级(用于升级)。<br>ACTION_MAP_FIREWORKS &#x3D; 314, &#x2F;&#x2F; 放焰火<br>ACTION_MAP_315 &#x3D; 315, &#x2F;&#x2F; 不知道是什么，返回true.白萝卜说是不是删除障碍用的。我觉得很有可能。。<br>ACTION_MAP_DATAVAR_INIT &#x3D; 316, &#x2F;&#x2F; 初始化地图整数型变量。map_var(1000,3) set 0 …对应变量名：%map_iter_var_data3 。注:1000表示地图编号，支持%user_map_id<br>ACTION_MAP_DATAVAR &#x3D; 317, &#x2F;&#x2F; 地图整数型变量赋值(对比)。map_var(1000,3) +&#x3D; 1 …支持: &#x2F;&#x2F; &#x3D;&#x3D; ， +&#x3D;, &#x2F;&#x3D;, <em>&#x3D; 注:1000表示地图编号 ，支持%user_map_id<br>ACTION_MAP_STRVAR &#x3D; 318, &#x2F;&#x2F; 地图文本型变量对比（否区分大小写） map_var(1000,0) &#x3D;&#x3D; %map_iter_var_str1注:1000表示地图编号，支持%user_map_id<br>ACTION_MAP_STRVAR_INIT &#x3D; 319, &#x2F;&#x2F; 初始化地图文本型变量。map_var(1000,3) set 失魂落魄铃铛 …对应变量名：%map_iter_var_str3 注:1000表示地图编号，支持%user_map_id<br>ACTION_MAP_LIMIT &#x3D; 399, &#x2F;&#x2F; item action only part, need pUser+pItem ptr ————————————————————————–<br>ACTION_ITEMONLY_FIRST &#x3D; 400,<br>ACTION_ITEM_REQUESTLAYNPC &#x3D; 401, &#x2F;&#x2F; 通知客户端放置一个NPC。param&#x3D;”idNextTask type sort lookface region”, 至少4个参数。region表示cq_region的type<br>ACTION_ITEM_COUNTNPC &#x3D; 402, &#x2F;&#x2F; 检查同地图的NPC数量。param&#x3D;”field data opt num”, field&#x3D;”name”(按名字)、”type”(按类型)、”all”(所有NPC)、”furniture”(家具), data&#x3D;要统计的名字或类型(all和furniture填0), opt&#x3D;”&lt;”、”&#x3D;&#x3D;”。<br>ACTION_ITEM_LAYNPC &#x3D; 403, &#x2F;&#x2F; 创建一个NPC，创建成功后，该NPC即是当前任务NPC，owner_id会自动设置为帮派ID或玩家ID。param&#x3D;”name type sort lookface ownertype life region base linkid task0 task0 … task7 data0 data1 data2 data3 datastr”。至少5个参数。靶子的等级放在data3中。<br>ACTION_ITEM_DELTHIS &#x3D; 498, &#x2F;&#x2F; 删除当前任务物品。注意：必须为最后一个<br>ACTION。<br>ACTION_ITEMONLY_LIMIT &#x3D; 499, &#x2F;&#x2F; user item part, need user ptr ————————————————————————–<br>ACTION_ITEM_FIRST &#x3D; 500,<br>ACTION_ITEM_ADD &#x3D; 501, &#x2F;&#x2F; 添加物品。data&#x3D;itemtype_id, param&#x3D;”amount amount_limit ident gem1 gem2 magic1 magic2 magic3 data warghostexp gemtype availabletime MONOPOLY eudemon_attack1 eudemon_attack2 &#x2F;&#x2F; eudemon_attack3 eudemon_attack4 special_effect Gem3 GodExp prescription”, param可省略，所有缺省值为0(表示不修改)，prescription为几分钟。<br>ACTION_ITEM_DEL &#x3D; 502, &#x2F;&#x2F; 删除物品。data&#x3D;itemtype_id, param不为0时，可叠加类物品会同时删除多个。或者data为0，param表示要删除的物品名。<br>ACTION_ITEM_CHECK &#x3D; 503, &#x2F;&#x2F; 检测物品。data&#x3D;itemtype_id, param不为0时，同时检查物品的数量(或耐久度)，此物品必须达到要求的数量(或耐久度)才行。或者data为0，param表示要找的物品名。<br>ACTION_ITEM_HOLE &#x3D; 504, &#x2F;&#x2F; 武器打洞。param 支持 “ChkHole HoleNum” 或者”MakeHole HoleNum”，Num为1或者2<br>ACTION_ITEM_REPAIR &#x3D; 505, &#x2F;&#x2F; 装备修理。data为指定装备的位置。<br>ACTION_ITEM_MULTIDEL &#x3D; 506, &#x2F;&#x2F; 删除多种物品, param为 “idType0 idType1 num”，即删除num个idType0-idType1的物品。<br>ACTION_ITEM_MULTICHK &#x3D; 507, &#x2F;&#x2F; 检测多种物品, param为 “idType0 idType1 num”，即检测num个idType0-idType1的物品。<br>ACTION_ITEM_LEAVESPACE &#x3D; 508, &#x2F;&#x2F; 检查背包剩余空间。param&#x3D;”space weight packtype” &#x2F;&#x2F; 其中packtype的取值范围为50 ~ 53 &#x2F;&#x2F; 50：普通物品背包 &#x2F;&#x2F; 51：魔魂宝石背包 &#x2F;&#x2F; 52：幻兽蛋背包 &#x2F;&#x2F; 53：幻兽背包<br>ACTION_ITEM_UPEQUIPMENT &#x3D; 509, &#x2F;&#x2F; 装备操作, param格式为”cmd position”, &#x2F;&#x2F; cmd支持”up_lev”, “up_quality”, “recover_dur” &#x2F;&#x2F; position 为装备位置, 定义如下 &#x2F;* ITEMPOSITION_HELMET &#x3D; 1; ITEMPOSITION_NECKLACE &#x3D; 2; ITEMPOSITION_ARMOR &#x3D; 3; ITEMPOSITION_WEAPONR &#x3D; 4; ITEMPOSITION_WEAPONL &#x3D; 5; ITEMPOSITION_RINGR &#x3D; 6; ITEMPOSITION_RINGL &#x3D; 7; ITEMPOSITION_SHOES &#x3D; 8; ITEMPOSITION_MOUNT &#x3D; 9*&#x2F;<br>ACTION_ITEM_EQUIPTEST &#x3D; 510, &#x2F;&#x2F; 物品品质检验, &#x2F;&#x2F; param “equip_pos cmd opt num”, &#x2F;&#x2F; equip_pos同上position定义, &#x2F;&#x2F; cmd支持”level”, “quality”, “durability”, “max_dur” &#x2F;&#x2F; opt支持”&#x3D;&#x3D;, &gt;&#x3D;, &lt;&#x3D;”, &#x2F;&#x2F; num为数据, cmd为”durability”和”max_dur”时, -1为最大值<br>ACTION_ITEM_EQUIPEXIST &#x3D; 511, &#x2F;&#x2F; 装备存在检验, data为装备位置<br>ACTION_ITEM_EQUIPCOLOR &#x3D; 512, &#x2F;&#x2F; 装备颜色改变, param &#x3D; “equip_pos color”, equip_pos支持如下 &#x2F;* ITEMPOSITION_HELMET &#x3D; 1; ITEMPOSITION_ARMOR &#x3D; 3; ITEMPOSITION_WEAPONL &#x3D; 5; *&#x2F; &#x2F;&#x2F; ITEMPOSITION_WEAPONL 必须是盾牌才起作用<br>ACTION_ITEM_FIND &#x3D; 513, &#x2F;&#x2F; 查找一个物品，type存在user的iterator中。data&#x3D;itemtype_id。或者data为0，param表示要查找的物品名。<br>ACTION_ENCASH_CHIP &#x3D; 514, &#x2F;&#x2F; 用筹码换钱，钱数在Ｉｔｅｍ中的Ｄａｔａ字段<br>ACTION_ITEM_517 &#x3D; 517, &#x2F;&#x2F;组队的传送卷轴，<br>ACTION_ITEM_518 &#x3D; 518, &#x2F;&#x2F;组队的召唤卷轴，<br>ACTION_ITEM_IDENTITEM &#x3D; 519, &#x2F;&#x2F;用装备鉴定卷轴鉴定物品<br>ACTION_ITEM_IDENTEUDEMON &#x3D; 520, &#x2F;&#x2F;用幻兽鉴定卷轴鉴定物品<br>ACTION_ITEM_521 &#x3D; 521,&#x2F;&#x2F;不知道是什么。跟刷花有关<br>ACTION_ITEM_522 &#x3D; 522,&#x2F;&#x2F;不知道是什么。跟刷花有关<br>ACTION_ITEM_EUDEMON_CHECK &#x3D; 523, &#x2F;&#x2F;判断幻兽的相关属性，可把几条判断合到一块写。。如：ismyselfeudemon &#x3D;&#x3D; 1,iscallout &#x3D;&#x3D; 1,isalive &#x3D;&#x3D; 1,level &#x3D;&#x3D; 1,damage !&#x3D; 5<br>ACTION_ITEM_EUDEMON_SET &#x3D; 524, &#x2F;&#x2F;写入幻兽的相关属性，不可以把几条合在一块写。。。如：damage 5 、 level 1<br>ACTION_ITEM_ADD_525 &#x3D; 525, &#x2F;&#x2F;跟501是一样的，参数也一样，只是最后那一个availabletime，改成时效天数。。<br>ACTION_ITEM_CREATEEUDEMON_X12 &#x3D; 526, &#x2F;&#x2F;直接在身上创建一个12星的XO幻兽<br>ACTION_ITEM_CREATEEUDEMON_X8 &#x3D; 527, &#x2F;&#x2F;直接在身上创建一个8星的O幻兽<br>ACTION_ITEM_CREATEEUDEMON_X6 &#x3D; 530, &#x2F;&#x2F;直接在身上创建一个6星的O幻兽<br>ACTION_ITEM_CREATEEUDEMON_X19 &#x3D; 531, &#x2F;&#x2F;直接在身上创建一个19星的XO幻兽<br>ACTION_ITEM_TALENT &#x3D; 534, &#x2F;&#x2F;幻兽天赋判断和修改。talent1 &#x3D;，&#x3D;&#x3D;<br>ACTION_ITEM_CREATEEUDEMON_X25 &#x3D; 538, &#x2F;&#x2F;直接在身上创建一个25星的XO幻兽 ..param为0是为25星。为其它值时，是指定星数（可用于实现更多星的X0）<br>ACTION_ITEM_540 &#x3D; 540, &#x2F;&#x2F;检查和修改物品的数量。.param&#x3D;”amount +&#x3D; 1” 。运算符支持&lt;、&gt;、&lt;&#x3D;、&gt;&#x3D;、&#x3D;、+&#x3D;。可以为负数。只能用于可拆解的物品。<br>ACTION_ITEM_ADD_550 &#x3D; 550,&#x2F;&#x2F;跟501是一样的，参数也是一样的。只是说客户端上多了一个显示效果。 &#x2F;&#x2F;&#x2F;回头扩展时可以考虑直接在538后面加参数。<br>ACTION_ITEM_LIMIT &#x3D; 599, &#x2F;&#x2F; user npc only part, need not user ptr ————————————————————————–<br>ACTION_NPCONLY_FIRST &#x3D; 600,<br>ACTION_NPCONLY_CREATENEW_PET&#x3D; 601, &#x2F;&#x2F; 创建一个MONSTER，OWNERID、OWNERTYPE与NPC相同。param&#x3D;”x y generator_id type data name”, 至少4个参数, 如有name则改名。generator用于控制怪物活动范围，cq_generator中的type无意义。x、y本地图的绝对坐标。<br>ACTION_NPCONLY_DELETE_PET &#x3D; 602, &#x2F;&#x2F; 删除本地图的所有MONSTER，OWNERID、OWNERTYPE与NPC相同。param&#x3D;”type data name”, 至少1个参数, data不为0则同时匹配data, 如有name则同时匹配名字。<br>ACTION_NPCONLY_MAGICEFFECT &#x3D; 603, &#x2F;&#x2F; NPC发一个魔法效果。param&#x3D;”source_id magic_type magic_level target_id data”<br>ACTION_NPCONLY_MAGICEFFECT2 &#x3D; 604, &#x2F;&#x2F; NPC发一个地效魔法。param&#x3D;”source_id magic_type magic_level x y target_id data”, 至少5个参数。<br>ACTION_NPCONLY_LIMIT &#x3D; 699, &#x2F;&#x2F; user syndicate part ————————————————————————–<br>ACTION_SYN_FIRST &#x3D; 700, &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F; &#x2F;&#x2F; 帮派Action整理<br>ACTION_SYN_CREATE &#x3D; 701, &#x2F;&#x2F; 创帮，玩家要输入帮派名字。param&#x3D;”level money leave_money”, 三个参数为需要的玩家等级，需要的现金数，帮派成立后所余现金数。<br>ACTION_SYN_DESTROY &#x3D; 702, &#x2F;&#x2F; 解散。执行Action的玩家为团长、分团长、分队长的时候，分别表示解散帮派、分团、分队<br>ACTION_SYN_DONATE &#x3D; 703, &#x2F;&#x2F; 捐款，需要一个输入框。<br>ACTION_SYN_CREATE_SUB &#x3D; 708, &#x2F;&#x2F; 创子帮(军团长执行就是创建分团，分团长执行就是创建分队)， &#x2F;&#x2F; 玩家要输入帮派名字(长度不大于16BYTE)。<br>ACTION_SYN_COMBINE_SUB &#x3D; 710, &#x2F;&#x2F; 合并子帮派。执行Action的玩家是子帮派的帮主，合并到父帮派<br>ACTION_SYN_ATTR &#x3D; 717, &#x2F;&#x2F; 检查和修改帮派属性，参数不小于3个，缺省帮派ID是当前玩家的帮派ID。 &#x2F;&#x2F; param&#x3D;”szField szOpt data syn_id”, szField可选： &#x2F;&#x2F; 基金：”money” (opt可选”+&#x3D;”, “&lt;”), &#x2F;&#x2F; 声望：”repute” (opt可选”+&#x3D;”, “&lt;”), &#x2F;&#x2F; 人数：”membernum”(opt为”&lt;”), &#x2F;&#x2F; 父帮派：”fealty” (opt为”&#x3D;&#x3D;”), &#x2F;&#x2F; 等级：”level” (opt可选”&#x3D;”, “+&#x3D;”, “&lt;”, “&#x3D;&#x3D;”)<br>ACTION_SYN_ALLOCATE_SYNFUND &#x3D; 729, &#x2F;&#x2F; 分配帮派基金。需要玩家数据具体金额(最多不超过总基金的50%)<br>ACTION_SYN_RENAME &#x3D; 731, &#x2F;&#x2F; 重命名帮派。必须是子帮派，由子帮派的帮主执行 &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>ACTION_SYN_DEMISE &#x3D; 704, &#x2F;&#x2F; 禅让, 只允许军团长禅让，分团长和分队长都不允许。 &#x2F;&#x2F; 玩家要输入帮众名字。param&#x3D; “level”，表示接受禅让的玩家需要的等级<br>ACTION_SYN_SET_ASSISTANT &#x3D; 705, &#x2F;&#x2F; 提升为副帮主, 玩家要输入帮众名字。<br>ACTION_SYN_CLEAR_RANK &#x3D; 706, &#x2F;&#x2F; 解除职务, 玩家要输入帮众名字。<br>ACTION_SYN_PRESENT_MONEY &#x3D; 707, &#x2F;&#x2F; 送钱给其它帮派。帮主要输入金钱数量，其它帮派的ID为TASK_ITERATOR(参见<br>ACTION_SYN_FIND_BY_NAME)。送钱不能少于10000<br>ACTION_SYN_CHANGE_LEADER &#x3D; 709, &#x2F;&#x2F; 更新子帮派的帮主。帮主和子帮派新帮主组队，输入子帮派名字。param&#x3D; level，要求的新帮主等级<br>ACTION_SYN_ANTAGONIZE &#x3D; 711, &#x2F;&#x2F; 树敌, 玩家要输入帮派名字。<br>ACTION_SYN_CLEAR_ANTAGONIZE &#x3D; 712, &#x2F;&#x2F; 清除树敌，玩家要输入帮派名字。<br>ACTION_SYN_ALLY &#x3D; 713, &#x2F;&#x2F; 结盟，要求两个帮主组队<br>ACTION_SYN_CLEAR_ALLY &#x3D; 714, &#x2F;&#x2F; 解除结盟,玩家要输入帮派名字。<br>ACTION_SYN_KICKOUT_MEMBER &#x3D; 715, &#x2F;&#x2F; 按名字开除帮众，玩家要输入帮众名字。<br>ACTION_SYN_CREATENEW_PET &#x3D; 716, &#x2F;&#x2F; (作废)创建一个帮派守护兽。param&#x3D;”generator_id type data”, 至少两个参数, 如有accept则改名。generator用于控制怪物活动范围，cq_generator中的type无意义。<br>ACTION_SYN_CHANGESYN &#x3D; 718, &#x2F;&#x2F; 帮众转堂口。堂口转堂口，堂口和总帮互转。需要帮众和堂主(或帮主)组队，一次转一人。需要输入要转入的堂口名字(或帮派名字)。转过去之前职位会被自动取消。<br>ACTION_SYN_CHANGE_SUBNAME &#x3D; 719, &#x2F;&#x2F; 修改堂口名，只限于名字超过6个字节的堂口。否则返回FALSE。(临时功能)<br>ACTION_SYN_FIND_NEXT_SYN &#x3D; 720, &#x2F;&#x2F; 查找下一个帮派，将ID写入TASK_ITERATOR<br>ACTION_SYN_FIND_BY_NAME &#x3D; 721, &#x2F;&#x2F; 按名字查找帮派，玩家要输入帮派名字。将ID写入TASK_ITERATOR<br>ACTION_SYN_FIND_NEXT_SYNMEMBER &#x3D; 722, &#x2F;&#x2F; 查找下一个帮众，将ID写入TASK_ITERATOR<br>ACTION_SYN_SAINT &#x3D; 724, &#x2F;&#x2F; 圣骑士团的升级的操作 “&#x3D;, &gt;&#x3D;”<br>ACTION_SYN_RANK &#x3D; 726, &#x2F;&#x2F; 修改RANK，ACCEPT&#x3D;”rank name”。只修改RANK&#x3D;50及以下。param&#x3D;”RANK50的等级限制 RANK40的 30的 20 10”，param为空则不限制。<br>ACTION_SYN_UPMEMBERLEVEL &#x3D;728,<br>ACTION_SYN_APPLLY_ATTACKSYN &#x3D;730, &#x2F;&#x2F;申请攻打帮派<br>ACTION_SYN_LIMIT &#x3D; 799, &#x2F;&#x2F; monster part ————————————————————————–<br>ACTION_MST_FIRST &#x3D; 800,<br>ACTION_MST_DROPITEM &#x3D; 801, &#x2F;&#x2F; monster被杀死后掉物品或者钱, param “dropitem itemtype”或者”dropmoney money” &#x2F;&#x2F;monster被杀死后掉陷阱, param “droptrap traptype lifeperiod”。<br>ACTION_MST_MAGIC &#x3D; 802, &#x2F;&#x2F; 检查法术。 &#x2F;&#x2F; param “check type”(学过type类型的法术), &#x2F;&#x2F; “check type level”(学过type类型的法术，且等级为level级), &#x2F;&#x2F; “learn type”(学会type类法术，等级为0)， &#x2F;&#x2F; “uplevel type”(type类法术升一级)<br>ACTION_MST_LIMIT &#x3D; 899, &#x2F;&#x2F; user attr part ————————————————————————–<br>ACTION_USER_FIRST &#x3D; 1000,<br>ACTION_USER_VIP &#x3D; 5001,<br>ACTION_USER_ATTR &#x3D; 1001, &#x2F;&#x2F; 玩家属性的修改和检查。”attr opt data”。attr可选择 &#x2F;&#x2F; “life”(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “mana”(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “money”(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “exp”(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “pk”(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “profession”(&#x3D;&#x3D;, set, &gt;&#x3D;, &lt;&#x3D;)、 &#x2F;&#x2F; “level”、(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “force”、(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “dexterity”、(+&#x3D;,&#x3D;&#x3D;,&lt;) &#x2F;&#x2F; “speed”、(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “health”、(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “soul”、(+&#x3D;,&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “rank”、(&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “rankshow”、(&#x3D;&#x3D;,&lt;)、 &#x2F;&#x2F; “iterator”、(&#x3D;, &lt;&#x3D;, +&#x3D;, &#x3D;&#x3D;)、 &#x2F;&#x2F; “crime” (&#x3D;&#x3D;, set) &#x2F;&#x2F; “gamecard”(&#x3D;&#x3D;, &gt;&#x3D;, &lt;&#x3D;) &#x2F;&#x2F; “gamecard2”(&#x3D;&#x3D;, &gt;&#x3D;, &lt;&#x3D;) &#x2F;&#x2F; “xp”(+&#x3D;) &#x2F;&#x2F; “metempsychosis”(&#x3D;&#x3D;, &lt;) &#x2F;&#x2F; &#x2F;&#x2F; “nobility_rank”(&#x3D;&#x3D;, &lt;, +&#x3D;, &#x3D;) &#x2F;&#x2F; &#x2F;&#x2F; “mercenary_rank”(&#x3D;&#x3D;, &lt;, +&#x3D;) &#x2F;&#x2F; 佣兵等级 &#x2F;&#x2F; “mercenary_exp”(&#x3D;&#x3D;, &lt;, +&#x3D;) &#x2F;&#x2F; 佣兵经验 &#x2F;&#x2F; “exploit”(&#x3D;&#x3D;, &lt;, +&#x3D;) &#x2F;&#x2F; 功勋值 &#x2F;&#x2F; “maxlifepercent”(+&#x3D;,&#x3D;&#x3D;,&lt;) &#x2F;&#x2F; 最大生命千分比 &#x2F;&#x2F; “turor_exp”(&#x3D;&#x3D;,&lt;,+&#x3D;,&#x3D;) &#x2F;&#x2F; “eudemon_boord_size(&#x3D;&#x3D;,&lt;,+&#x3D;,&#x3D;)” &#x2F;&#x2F; “tutor_level”(&#x3D;&#x3D;,&lt;,+&#x3D;,&#x3D;) &#x2F;&#x2F; “syn_proffer”(&lt;,+&#x3D;,&#x3D;) &#x2F;&#x2F;帮派贡献度 &#x2F;&#x2F; “maxeudemon”(&lt;,+&#x3D;,&#x3D;) &#x2F;&#x2F;最大可召唤幻兽数 &#x2F;&#x2F; “soul_value(&lt;,+&#x3D;,&#x3D;)” &#x2F;&#x2F;魂力、灵力值。对应数据库内soul_value字段。(法师和战士是没有这两个东西的)<br>ACTION_EUDEMO_ATTRIB &#x3D; 1503, &#x2F;&#x2F;。支持(star &lt; &gt;&#x3D; &#x3D;&#x3D; ,callout &#x3D;&#x3D; , damagetype &#x3D;&#x3D; 5,fidelity +&#x3D; &lt; &gt; &#x3D;&#x3D;,type &#x3D;&#x3D;) (注：这里与2.0不同。一定要用,号隔开。)<br>ACTION_EUDEMO_REBORN &#x3D; 1531, &#x2F;&#x2F;复活已死亡的幻兽。data &#x3D;0 是表示只复活当前出征已死亡的幻兽。data &#x3D;1 时表示复活已死亡的所有幻兽(包含未出征的)<br>ACTION_1535 &#x3D; 1535, &#x2F;&#x2F;未知<br>ACTION_1537 &#x3D; 1537, &#x2F;&#x2F;未知<br>ACTION_1538 &#x3D; 1538, &#x2F;&#x2F;未知<br>ACTION_1539 &#x3D; 1539, &#x2F;&#x2F;复活人物，并且有检查时间，如果复活时间未到，返回false.<br>ACTION_1540 &#x3D; 1540, &#x2F;&#x2F;复活所有宝宝,包含未出征的。不检查时间。<br>ACTION_1541 &#x3D; 1541, &#x2F;&#x2F;未知。<br>ACTION_USER_BEGINRUNBUSINESS &#x3D; 1511, &#x2F;&#x2F;跑商data&#x3D;991,992,993,994 镖车样式 param “木材数量 单价 结束时间(秒)”<br>ACTION_USER_ENDRUNBUSINESS &#x3D; 1512, &#x2F;&#x2F;结束跑商<br>ACTION_USER_RUNBUSINESS &#x3D; 1513, &#x2F;&#x2F;判断是否正在拉车（跑商）.<br>ACTION_USER_LIFESKILL &#x3D; 1514, &#x2F;&#x2F;生活技能。支持learn check addexp (TrainReward 暂不支持，因为不知道是什么意思 )<br>ACTION_USER_CURRENT &#x3D; 1515, &#x2F;&#x2F; 目前知道的，用于判断当前幻兽出征数量。 &#x2F;&#x2F;callout_num (&lt;&#x3D;&#x3D;&gt;)<br>ACTION_1517 &#x3D; 1517, &#x2F;&#x2F;。PK赛用。<br>ACTION_1518 &#x3D; 1518, &#x2F;&#x2F;获得一指定时间内的经验20。但因为经验等级换算这块查不出来准确的数据，所以该类型没有用。。<br>ACTION_1545 &#x3D; 1545, &#x2F;&#x2F;不知道是什么。PK赛用。<br>ACTION_1527 &#x3D; 1527, &#x2F;&#x2F;不知道是什么。PK赛用。<br>ACTION_1543 &#x3D; 1543, &#x2F;&#x2F;不知道是什么。PK赛用。<br>ACTION_1544 &#x3D; 1544, &#x2F;&#x2F;不知道是什么。PK赛用。<br>ACTION_USER_1525 &#x3D; 1525, &#x2F;&#x2F; 传送进周PK赛地图（有检查一下是否在4分钟内(之所以是4分钟，是为了防止误差)） &#x2F;&#x2F;。并发送时间，当前地图人数，幽灵人物，杀人数量等封包。按官方的还应该要做幻兽培养经验，但目前那块没有弄。<br>ACTION_USER_FULL &#x3D; 1002, &#x2F;&#x2F; 将玩家的属性加满。”attr”。attr可选”life”,”mana”<br>ACTION_USER_CHGMAP &#x3D; 1003, &#x2F;&#x2F; 切地图 param “idMap nPosX nPosY bPrisonChk”, bPrisonChk为可选参数，缺省不可以出监狱，设置为1可以出<br>ACTION_USER_RECORDPOINT &#x3D; 1004, &#x2F;&#x2F; 存记录点 param “idMap nMapX nMapY”<br>ACTION_USER_HAIR &#x3D; 1005, &#x2F;&#x2F; “color num” &#x2F;&#x2F; “style num”<br>ACTION_USER_CHGMAPRECORD &#x3D; 1006, &#x2F;&#x2F; 切地图到记录点<br>ACTION_USER_CHGLINKMAP &#x3D; 1007, &#x2F;&#x2F; 切地图到NPC链接的地图。需要有NPC对象。<br>ACTION_USER_CHANGFACE &#x3D; 1008, &#x2F;&#x2F;改玩家头像<br>ACTION_USER_CHECKSTATE &#x3D; 1009, &#x2F;&#x2F;查人物状态。 164 second &gt; 0 。没必要去做时间检测。只做是否在该状态就成了。<br>ACTION_USER_CHECKFACE &#x3D; 1014, &#x2F;&#x2F;ChkFace 49目前已知的就是拿来检测人物头像<br>ACTION_USER_TALK &#x3D; 1010, &#x2F;&#x2F; 向玩家发MSGTALK消息。param中为消息内容, data为频道， &#x2F;&#x2F; const unsigned short _TXTATR_NORMAL &#x3D;2000; &#x2F;&#x2F; const unsigned short <em>TXTATR</em><br>ACTION &#x3D;_TXTATR_NORMAL+2; &#x2F;&#x2F; 动作 &#x2F;&#x2F; const unsigned short _TXTATR_SYSTEM &#x3D;_TXTATR_NORMAL+5; &#x2F;&#x2F; 系统 &#x2F;&#x2F; const unsigned short _TXTATR_TALK &#x3D;_TXTATR_NORMAL+7; &#x2F;&#x2F; 交谈 &#x2F;&#x2F; const unsigned short _TXTATR_GM &#x3D;_TXTATR_NORMAL+11; &#x2F;&#x2F; GM频道 &#x2F;&#x2F; const unsigned short _TXTATR_WEBPAGE &#x3D;_TXTATR_NORMAL+105; &#x2F;&#x2F; 打开URL<br>ACTION_USER_GODSTATUS &#x3D; 1012, &#x2F;&#x2F;神之祝福状态.([add check addonly] 1 小时 )<br>ACTION_USER_MAGIC &#x3D; 1020, &#x2F;&#x2F; 检查法术。param可以为： &#x2F;&#x2F; “check type”(玩家学过type类型的法术), &#x2F;&#x2F; “check type level”(玩家学过type类型的法术，且等级为level级), &#x2F;&#x2F; “learn type”(玩家学会type类法术，等级为0)， &#x2F;&#x2F; “uplevel type”(玩家的type类法术升一级) &#x2F;&#x2F; “addexp type exp”(玩家的type类法术增加exp点经验)<br>ACTION_USER_WEAPONSKILL &#x3D; 1021, &#x2F;&#x2F; “check type level”, 检查武器技能的类型和等级，是否&gt;&#x3D;等级 &#x2F;&#x2F; “learn type level”, 学习指定类型和等级的技能<br>ACTION_USER_LOG &#x3D; 1022, &#x2F;&#x2F; 保存指定信息到gm log并带入触发者信息（名字和id）,信息指定在param中 &#x2F;&#x2F; 比如 “%s 完成天剑任务并获得宝石”, param中%s就是保存触发者信息的位置<br>ACTION_USER_BONUS &#x3D; 1023, &#x2F;&#x2F; 取一个奖品。<br>ACTION_USER_DIVORCE &#x3D; 1024, &#x2F;&#x2F; 离婚<br>ACTION_USER_MARRIAGE &#x3D; 1025, &#x2F;&#x2F; 婚姻检查, 已婚返回1，未婚返回0<br>ACTION_USER_SEX &#x3D; 1026, &#x2F;&#x2F; 性别检查, 男返回1，女返回0<br>ACTION_USER_EFFECT &#x3D; 1027, &#x2F;&#x2F; 触发action的人物附加指定特效，param为”opt effect”, opt支持”self”, “couple”, “team”, “target”, effect为特效名称<br>ACTION_USER_TASKMASK &#x3D; 1028, &#x2F;&#x2F; task mask相关操作，param为”opt idx”, opt为操作，支持”chk”, “add”, “clr”, idx为任务编号，取值(0-31)<br>ACTION_USER_MEDIAPLAY &#x3D; 1029, &#x2F;&#x2F; 媒体播放, param 为”opt media”, opt支持 “play, broacast”, “media”为媒体文件名<br>ACTION_USER_SUPERMANLIST &#x3D; 1030, &#x2F;&#x2F; 查询无双列表, 起始值存在TASK_ITERATOR中。param&#x3D;”idNextTask number”, idNextTask是下一个TASK的值，number是每次下传几个列表项。<br>ACTION_USER_CHKIN_CARD &#x3D; 1031, &#x2F;&#x2F; 删除玩家身上的游戏卡物品，添加一个游戏卡记录<br>ACTION_USER_CHKOUT_CARD &#x3D; 1032, &#x2F;&#x2F; 添加一个游戏卡物品给玩家，删除一个游戏卡记录<br>ACTION_USER_CREATEMAP &#x3D; 1033, &#x2F;&#x2F; 创建一张地图，链接到玩家的home_id上，需要玩家对象。param&#x3D;”name owner_type owner_id mapdoc type portal_x portal_y reborn_map reborn_portal res_lev”。partal指入口点坐标，res_lev表示地图等级(用于升级)。<br>ACTION_USER_ENTER_HOME &#x3D; 1034, &#x2F;&#x2F; 回到自己的家。<br>ACTION_USER_ENTER_MATE_HOME &#x3D; 1035, &#x2F;&#x2F; 回到配偶的家。<br>ACTION_USER_CHKIN_CARD2 &#x3D; 1036, &#x2F;&#x2F; 删除玩家身上的游戏卡2物品，添加一个游戏卡2记录<br>ACTION_USER_CHKOUT_CARD2 &#x3D; 1037, &#x2F;&#x2F; 添加一个游戏卡2物品给玩家，删除一个游戏卡2记录<br>ACTION_USER_FLY_NEIGHBOR &#x3D; 1038, &#x2F;&#x2F; 在地图组中查找一个_ROLE_NEIGHBOR_DOOR类型的NPC，立即切屏到该NPC处。param&#x3D;”serial”，serial是指data3的值。<br>ACTION_USER_UNLEARN_MAGIC &#x3D; 1039, &#x2F;&#x2F; 转世时，忘却魔法技能，该技能将来可以再“顿悟”。param&#x3D;”type1 type2 …”，至少一个参数，最多20个参数。<br>ACTION_USER_REBIRTH &#x3D; 1040, &#x2F;&#x2F; 转世。如果已转过或者等级不够人，会失败。检查玩家是否已经转职、职业要求、等级要求。自动修改玩家职业、等级、身上装备等级、重新分配点数。param&#x3D;”nProf nLook” &#x2F;&#x2F; 以下功能由其它<br>ACTION完成：任务奖励；15、40、100级的就职奖励；坐骑奖励；随时回城；技能奖励。<br>ACTION_USER_WEBPAGE &#x3D; 1041, &#x2F;&#x2F; 通知客户端打开网页。param&#x3D;”http:&#x2F;&#x2F;…..”<br>ACTION_USER_BBS &#x3D; 1042, &#x2F;&#x2F; 在BBS公告板中，添加一条SYSTEM频道的消息，留言人为玩家名字。需要USER对象，每个USER仅保留一条。param是消息内容。<br>ACTION_USER_UNLEARN_SKILL &#x3D; 1043, &#x2F;&#x2F; 转世时，忘却所有武器技能，该技能将来可以再“顿悟”。<br>ACTION_USER_DROP_MAGIC &#x3D; 1044, &#x2F;&#x2F; 转世时，删除魔法技能。param&#x3D;”type1 type2 …”，至少一个参数，最多20个参数。<br>ACTION_USER_OPEN_DIALOG &#x3D; 1046, &#x2F;&#x2F; 通知客户端打开一个界面。data&#x3D;idDialog。param&#x3D;”task_id0 task_id1 task_id2 task_id3 …”，可以无param，最多20个task_id, task_id不能为0, 允许客户端选择下一个TASK。无param时，客户端只能上传“客户端可触发的TASK”。有param时，cq_task.client_active必须为0。<br>ACTION_USER_CHGMAP_REBORN &#x3D; 1047, &#x2F;&#x2F; 切屏到复活点。 &#x2F;&#x2F;<br>ACTION_USER_ADD_WPG_BADGE &#x3D; 1048, &#x2F;&#x2F; 添加周PK赛信物，按身上找到的第一件信物类型添加。该物品必须是可叠加的。最多只给两个。<br>ACTION_USER_DEL_WPG_BADGE &#x3D; 1049, &#x2F;&#x2F; 删除所有周PK赛信物。<br>ACTION_USER_CHK_WPG_BADGE &#x3D; 1050, &#x2F;&#x2F; 检查玩家身上只有一个param类型的物品(数量只能有一个)，没有其它周PK赛的信物。param为空表示不能有任何周PK赛信物。<br>ACTION_USER_TAKESTUDENTEXP &#x3D; 1051, &#x2F;&#x2F; 提取徒弟贡献的经验。玩家返回pszAccept指定需要提取的经验值，自动扣除导师经验。<br>ACTION_USER_CHGTO_MAINMAP &#x3D; 1052, &#x2F;&#x2F; 到主地图的复活点复活<br>ACTION_USER_CHGTO_RANDOMPOS &#x3D; 1053, &#x2F;&#x2F; 人物随机飞到当前地图上任意一个坐标（该点不能有掩码）<br>ACTION_USER_SET_PASSROD &#x3D; 1055, &#x2F;&#x2F;设置仓库密码。<br>ACTION_USER_BBSAVEPASSWORD &#x3D; 1056, &#x2F;&#x2F;&#x2F;&#x2F;检测是否已经存在幻兽仓库密码锁<br>ACTION_USER_SAVEPASSWORD &#x3D; 1057, &#x2F;&#x2F;&#x2F;&#x2F;检测是否已经存在普通仓库密码锁<br>ACTION_USER_SAVEPASSWORD1 &#x3D; 228, &#x2F;&#x2F;&#x2F;&#x2F;检测是否已经存在普通仓库密码锁(跟上面那个可能写错了，但不想做这东西，所以乱写了) &#x2F;&#x2F;—任务系统，记录任务的细节—begin<br>ACTION_USER_TASK_MANAGER &#x3D; 1080, &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F; &#x2F;&#x2F;&#x2F;&#x2F;data:任务编号， &#x2F;&#x2F;param: ‘new’ (为创建新记录) &#x2F;&#x2F; ‘delete’ (删除记录) &#x2F;&#x2F; ‘isexit’ (任务是否存在) &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>ACTION_USER_TASK_OPE &#x3D;1081, &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F; &#x2F;&#x2F;data: 任务编号， 若data &#x3D;&#x3D; -1 ,则下面的操作是针对 findnext 进行的 &#x2F;&#x2F;param: ‘ope opt data’, data(值) &#x2F;&#x2F; ope(phase) opt(&gt;&#x3D;, &#x3D;&#x3D;, +&#x3D;,&#x3D;) 对任务阶段操作 &#x2F;&#x2F; ope(completenum) opt(&gt;&#x3D;, &#x3D;&#x3D;, +&#x3D;,&#x3D;) 对任务完成次数操作 &#x2F;&#x2F; ope(begintime) opt(&gt;&#x3D;, &#x3D;&#x3D;, +&#x3D;,&#x3D;,reset) 对任务开始时间操作, 对于 +&#x3D; 时 以秒为参数；对于”&gt;&#x3D;,&#x3D;&#x3D;,&#x3D;”时以”yyyy-mm-dd hh:mm:ss”为格式 &#x2F;&#x2F; reset表示 将任务的开始时间设置为当前时间<br>ACTION_USER_TASK_LOCALTIME &#x3D; 1082, &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F; &#x2F;&#x2F;data: 任务编号， &#x2F;&#x2F;param: ‘秒数’ , 当前时间与任务开始时间比较的action；若当前时间与任务的开始时间之差 大于 param ，则返回true.否则返回false &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>ACTION_USER_TASK_FIND &#x3D; 1083, &#x2F;&#x2F;对玩家任务进行查询 ,记录是按照 userid , taskid 升序的集合 &#x2F;&#x2F;param: ‘find taskid phase completenum ‘;根据任务ID，阶段，完成次数查询具体记录; phase 与 cocompletenum同时为-1时，只查询符合taskid的记录 &#x2F;&#x2F; ‘findnext’ ;查询下一条记录 &#x2F;&#x2F;—任务系统，记录任务的细节—end<br>ACTION_USER_TASK_LOG &#x3D; 1085, &#x2F;&#x2F;用于在脚本内写入日志。但并未使用（by:178）<br>ACTION_USER_TASK_LOCALDAY &#x3D; 1086, &#x2F;&#x2F;data: 任务编号， &#x2F;&#x2F;param: ‘天数’ , 当前时间与任务开始时间比较的action；若当前时间与任务的开始时间之差 大于或等于 param ，则返回true.否则返回false &#x2F;&#x2F; team part. ★ 没有队伍时，会返回 false。以下<br>ACTION必须由队长触发， &#x2F;&#x2F; 操作对象为每个队员(通常不包括队长)，队员必须在一屏范围内。 &#x2F;&#x2F; 注意：必须所有的队员都true时，才返回true；否则返回false &#x2F;&#x2F; ★ —————————————————————<br>ACTION_TEAM_BROADCAST &#x3D; 1101, &#x2F;&#x2F; 向在队伍频道中广播一条消息。param&#x3D;消息。<br>ACTION_TEAM_ATTR &#x3D; 1102, &#x2F;&#x2F; 检查或操作队员属性。 &#x2F;&#x2F; param&#x3D;”field opt data”, &#x2F;&#x2F; field&#x3D;”money”(+&#x3D;、&lt;、&gt;、&#x3D;&#x3D;), &#x2F;&#x2F; field&#x3D;”level”(&lt;、&gt;、&#x3D;&#x3D;), &#x2F;&#x2F; field&#x3D;”count”(含队长的队员数量，&lt;、&#x3D;&#x3D;), &#x2F;&#x2F; field&#x3D;”count_near”(含队长的队员数量，本地图中，必须活着，&lt;、&#x3D;&#x3D;), &#x2F;&#x2F; field&#x3D;”mate”(只需要field，必须活着), &#x2F;&#x2F; field&#x3D;”friend”(只需要field，必须活着),<br>ACTION_TEAM_LEAVESPACE &#x3D; 1103, &#x2F;&#x2F; 检查背包剩余空间, param&#x3D;”space weight packtype”。 &#x2F;&#x2F; packtype为需要检查的背包类型，取值范围50<del>53<br>ACTION_TEAM_ITEM_ADD &#x3D; 1104, &#x2F;&#x2F; 添加物品。data&#x3D;itemtype_id<br>ACTION_TEAM_ITEM_DEL &#x3D; 1105, &#x2F;&#x2F; 删除物品。data&#x3D;itemtype_id<br>ACTION_TEAM_ITEM_CHECK &#x3D; 1106, &#x2F;&#x2F; 检测物品。data&#x3D;itemtype_id<br>ACTION_TEAM_CHGMAP &#x3D; 1107, &#x2F;&#x2F; 组队切屏(包含队长)，仅用于同一个地图组切屏，所有人必须活着。param&#x3D;”mapid x y”<br>ACTION_TEAM_CHK_ISLEADER &#x3D; 1501, &#x2F;&#x2F; 检查是否为队长，不需要参数<br>ACTION_USER_LUCKDRAW &#x3D; 1508, &#x2F;&#x2F; 抽奖<br>ACTION_USER_DATAVAR_INIT &#x3D; 1521, &#x2F;&#x2F; 初始化整数型变量。var(3) set 0 …对应变量名：%iter_var_data3<br>ACTION_USER_DATAVAR &#x3D; 1522, &#x2F;&#x2F; 整数型变量赋值。var(3) +&#x3D; 1 …支持: &#x2F;&#x2F; &#x3D;&#x3D; ， +&#x3D;, &#x2F;&#x3D;, *&#x3D; 也支持%iter_var_data2变量。<br>ACTION_USER_STRVAR &#x3D; 1523, &#x2F;&#x2F; 文本型变量对比（否区分大小写） var(0) &#x3D;&#x3D; %iter_var_str1<br>ACTION_USER_STRVAR_INIT &#x3D; 1524, &#x2F;&#x2F; 初始化文本型变量。var(3) set 失魂落魄铃铛 …对应变量名：%iter_var_Str3<br>ACTION_USER_AUTORUN &#x3D; 1532, &#x2F;&#x2F;自动寻路。 x ,y 、NPCID。302 397 1904<br>ACTION_USER_EUDEMON &#x3D; 1533, &#x2F;&#x2F; 已知的： &#x2F;&#x2F; star &gt;&#x3D; 4000 星数。加入star +&#x3D; 1000 直接调星。 &#x2F;&#x2F; rebornlimitadd +&#x3D; 1 最大转世增加 &#x2F;&#x2F; alive &#x3D;&#x3D; 0 是否活着 &#x2F;&#x2F; iscallout &#x3D;&#x3D; 0 是否出征 &#x2F;&#x2F; luck &#x3D;&#x3D; 198 幸运。 &#x2F;&#x2F; uplevtime +&#x3D; 1800 &#x2F;&#x2F; 不知道是什么 &#x2F;&#x2F; egg &#x2F;&#x2F;是不是幻兽蛋 &#x2F;&#x2F; fidelity &#x2F;&#x2F;这个忘了是什么。但好像有点用。 &#x2F;&#x2F; damagetype 这个是四相属性的。<br>ACTION_USER_LIMIT &#x3D; 1999, &#x2F;&#x2F; event part, need not any ptr ————————————————————————–<br>ACTION_EVENT_FIRST &#x3D; 2000,<br>ACTION_EVENT_SETSTATUS &#x3D; 2001, &#x2F;&#x2F; 设置地图状态。param&#x3D;”mapid status_bit data”, status_bit &#x3D; { STATUS_WAR&#x3D;1, }, data&#x3D;0或1。<br>ACTION_EVENT_DELNPC_GENID &#x3D; 2002, &#x2F;&#x2F; (作废)删除MONSTER。param&#x3D;”idMap idGen”。<br>ACTION_EVENT_COMPARE &#x3D; 2003, &#x2F;&#x2F; 比较各种属性。”data1 opt data2”。data1、data2为带%的通用参数, 按带符号数比较。opt可选”&#x3D;&#x3D;”、”&lt;”、”&lt;&#x3D;”<br>ACTION_EVENT_COMPARE_UNSIGNED &#x3D; 2004, &#x2F;&#x2F; 比较各种属性。”data1 opt data2”。data1、data2为带%的通用参数, 按无符号数比较。opt可选”&#x3D;&#x3D;”、”&lt;”、”&lt;&#x3D;”<br>ACTION_EVENT_CHANGEWEATHER &#x3D; 2005, &#x2F;&#x2F; 修改指定REGION的天气。param&#x3D;”idMap idRegion Type Intensity Dir Color KeepSecs”, Type, Intensity&#x3D;0</del>999, Dir&#x3D;0~359, Color&#x3D;0x00RRGGBB, KeepSecs&#x3D;seconds<br>ACTION_EVENT_CREATEPET &#x3D; 2006, &#x2F;&#x2F; 创建一个MONSTER。param&#x3D;”nOwnerType idOwner idMap nPosX nPosY idGen idType nData szName”, 至少7个参数, 如有accept则改名，否则用name命名。generator用于控制怪物活动范围，cq_generator中的type无意义。idOwner为0时，不存盘。<br>ACTION_EVENT_CREATENEW_NPC &#x3D; 2007, &#x2F;&#x2F; 创建一个NPC。param&#x3D;”name type sort lookface ownertype ownerid mapid posx posy life base linkid task0 task0 … task7 data0 data1 data2 data3 datastr”。至少9个参数。<br>ACTION_EVENT_COUNTMONSTER &#x3D; 2008, &#x2F;&#x2F; 检查同地图的MONSTER数量。param&#x3D;”idMap field data opt num”, field&#x3D;”name”(按名字)、”gen_id”(按类型), data&#x3D;要统计的名字或类型, opt&#x3D;”&lt;”、”&#x3D;&#x3D;”。<br>ACTION_EVENT_DELETEMONSTER &#x3D; 2009, &#x2F;&#x2F; 删除某地图的MONSTER。param&#x3D;”idMap type data name”, 至少两个参数。如果data不为0则同时匹配data, 如果有name则同时匹配name。<br>ACTION_EVENT_BBS &#x3D; 2010, &#x2F;&#x2F; 在BBS公告板中，添加一条SYSTEM频道的消息，留言人为“SYSTEM”。param是消息内容。<br>ACTION_EVENT_ERASE &#x3D; 2011, &#x2F;&#x2F; 删除指定NPC。限动态NPC。注意：删除后，不要再对此类NPC进行操作。param&#x3D;”idMap type”: 删除指定地图的所有类型为type的NPC。<br>ACTION_EVENT_MAPALLUSER_RUNSCRIPT &#x3D; 2012 ,&#x2F;&#x2F;指定地图内的玩家。全部执行指定脚本。param&#x3D;“8939 9701551 -1”。最后那个-1不知道是什么意思。<br>ACTION_EVENT_LIMIT &#x3D; 2099, &#x2F;&#x2F; event part, need not any ptr ————————————————————————–<br>ACTION_TRAP_FIRST &#x3D; 2100,<br>ACTION_TRAP_CREATE &#x3D; 2101, &#x2F;&#x2F; 创建一个陷阱。param&#x3D;”type look owner_id map_id pos_x pos_y data”。<br>ACTION_TRAP_ERASE &#x3D; 2102, &#x2F;&#x2F; 删除一个陷阱。param&#x3D;””, 删除当前陷阱。注意：删除后不要再操作该陷阱。<br>ACTION_TRAP_COUNT &#x3D; 2103, &#x2F;&#x2F; 检测类型为type的陷阱数量, 小于count返回true。param&#x3D;”map_id pos_x pos_y pos_cx pos_cy count type”。<br>ACTION_TRAP_ATTR &#x3D; 2104, &#x2F;&#x2F; 修改陷阱的属性(不存盘)。param&#x3D;”id field opt num”。field: “type”(opt: “&#x3D;”), “look”(opt: “&#x3D;”)。<br>ACTION_TRAP_ERASETYPE &#x3D; 2105, &#x2F;&#x2F; 删除指定地图的陷阱类型。param&#x3D;”mapid type” 注意：删除后不要再操作该陷阱。<br>ACTION_TRAP_LIMIT &#x3D; 2199, &#x2F;&#x2F; wanted list part ————————————————————————–<br>ACTION_WANTED_FIRST &#x3D; 3000,<br>ACTION_WANTED_NEXT &#x3D; 3001, &#x2F;&#x2F; 搜寻下个悬赏，将idx写入TASK_ITERATOR<br>ACTION_WANTED_NAME &#x3D; 3002, &#x2F;&#x2F; 玩家返回pszAccept指定被悬赏者名字, 和<br>ACTION_WANTED_NEW联用。<br>ACTION_WANTED_BONUTY &#x3D; 3003, &#x2F;&#x2F; 玩家返回pszAccept指定金额，和<br>ACTION_WANTED_NEW联用。<br>ACTION_WANTED_NEW &#x3D; 3004, &#x2F;&#x2F; 通过CUser::m_WantedInfo生产新的悬赏记录，和上2条action联合使用。<br>ACTION_WANTED_ORDER &#x3D; 3005, &#x2F;&#x2F; 领取pszAccept中指定的悬赏<br>ACTION_WANTED_CANCEL &#x3D; 3006, &#x2F;&#x2F; 以2倍的价钱取消pszAccept中指定的悬赏<br>ACTION_WANTED_MODIFYID &#x3D; 3007, &#x2F;&#x2F; 玩家返回pszAccept指定修改的悬赏id。<br>ACTION_WANTED_SUPERADD &#x3D; 3008, &#x2F;&#x2F; 玩家返回pszAccept指定追加悬赏的金钱，与<br>ACTION_WANTED_ID联合使用。<br>ACTION_POLICEWANTED_NEXT &#x3D; 3010, &#x2F;&#x2F; 搜寻下个官方悬赏，将idx写入TASK_ITERATOR<br>ACTION_POLICEWANTED_ORDER &#x3D; 3011, &#x2F;&#x2F; 揭榜(pszAccept中指定编号)<br>ACTION_POLICEWANTED_CHECK &#x3D; 3012, &#x2F;&#x2F; 检查触发人是否被官府通缉<br>ACTION_WANTED_LIMIT &#x3D; 3099, &#x2F;&#x2F; ghost gem magic part ———————————————————————————-<br>ACTION_MAGIC_FIRST &#x3D; 4000,<br>ACTION_MAGIC_ATTACHSTATUS &#x3D; 4001, &#x2F;&#x2F; 追加状态，szParam&#x3D;”status power secs times”<br>ACTION_MAGIC_ATTACK &#x3D; 4002, &#x2F;&#x2F; 魔法攻击，data&#x3D;magictype, szParam&#x3D;”magiclevel” &#x2F;&#x2F; 要求magictype表中存在相应的数据 &#x2F;&#x2F; 目前支持的魔法类型有： &#x2F;&#x2F; MAGICSORT_DETACHSTATUS &#x2F;&#x2F; MAGICSORT_STEAL<br>ACTION_MAGIC_MONSTER &#x3D; 4003, &#x2F;&#x2F;给幻兽加技能。data&#x3D;10060(技能编号</em>10)， szParam &#x3D; “107900 * 33” 。幻兽ID &#x2F;10 （*33表示33级才可以学）<br>ACTION_MAGIC_LIMIT &#x3D; 4099, &#x2F;&#x2F; &#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;以下是178新加的(跟官方不同)&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;<br>ACTION_NEW_COUNTDOWN &#x3D; 8000, &#x2F;&#x2F;倒计时，data&#x3D;时间(秒)，Param &#x3D; 倒计时结束后执行的脚本。data &#x3D; 0时，表示关闭倒计时并且不执行脚本。 &#x2F;&#x2F;注：一个号只能同时显示一个倒计时，所以在增加一个倒计时前，务必结束上一个倒计时。<br>ACTION_NEW_COUNTDOWN2 &#x3D; 8001, &#x2F;&#x2F;倒计时，data&#x3D;时间(秒)，“1 98120001 RichGod_Ground 正在拔除圣剑” &#x2F;&#x2F;(1表示不可移动,使用技能或点NPC或跑动将被打断,0表示进行其它操作)。98120001 倒计时结束后执行的脚本。“RichGod_Ground”是动作特效(对应3deffect.ini文件，无需特效时写成“null”)， “正在拔除圣剑”是客户端上显示的文字。 &#x2F;&#x2F;data &#x3D; 0时，表示关闭倒计时并且不执行脚本。 &#x2F;&#x2F;注：一个号只能同时显示一个倒计时，所以在增加一个倒计时前，务必结束上一个倒计时。<br>ACTION_NEW_COUNTDOWN3 &#x3D; 8002, &#x2F;&#x2F;当前地图任务倒计时。data&#x3D;副本ID值，Param &#x3D; “倒计时结束后执行的脚本”。切换地图后，倒计时自动结束并且不执行脚本。 &#x2F;&#x2F;注意：该脚本类型，一定要在传送到副本地图以后，才执行，另外地图编号一定要大于4000000000以上，且只针对副本类型地图有效。 &#x2F;&#x2F;副本的相关配置到cq_duplicate表设置，参照“Duplicate.ini”文件内的详细说明。cq_duplicate表的x、y表示被邀请者的接受后被传送到的坐标。 &#x2F;&#x2F;另外不会邀请在地图ID大于或等于4000000000的地图内的玩家。<br>ACTION_NEW_COUNTDOWN4 &#x3D; 8003, &#x2F;&#x2F;隐性倒计时脚本类型，客户端上不会出现时间信息。data&#x3D;时间(秒)，Param &#x3D; 倒计时结束后执行的脚本。data &#x3D; 0时，表示关闭倒计时并且不执行脚本。<br>ACTION_NEW_SETPOSE &#x3D; 8010, &#x2F;&#x2F;修改人物动作。 data&#x3D;动作编号 。(对应3dmotion.ini文件)<br>ACTION_ACROSSMAPPATHINFO &#x3D; 8011, &#x2F;&#x2F;用于跨地图自动寻路， param&#x3D;”mapid x y”。用这个时，得在cq_acrossmappathinfo表和AcrossMapPathInfo.ini都配置好才成。 };</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://danjimy.github.io">不在年少</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://danjimy.github.io/%E8%84%9A%E6%9C%AC/14912.html">https://danjimy.github.io/%E8%84%9A%E6%9C%AC/14912.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://danjimy.github.io" target="_blank">单机魔域综合网</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%96%87%E7%AB%A0%E6%A0%87%E7%AD%BE/">文章标签</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E8%84%9A%E6%9C%AC/41187.html" title="数据库表注释"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">数据库表注释</div></div></a></div><div class="next-post pull-right"><a href="/%E8%A1%A5%E4%B8%81/33136.html" title="修改游戏界面VIP钻石图标"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">修改游戏界面VIP钻石图标</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">不在年少</div><div class="author-info__description"></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"><i class="📑"></i><span>登陆  注册  发布文章</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><font  color=red size=4>需要什么直接在上面搜索框里搜，最快速度找到需要的东西</font></div></div><div class="sticky_layout"></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 不在年少</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://butterfly.js.org">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script src="/styles/fish.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>